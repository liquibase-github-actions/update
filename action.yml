# action.yml
# Code generated by protoc-gen-liquibase. DO NOT EDIT.
name: 'Liquibase Update Action'
description: 'Deploy any changes in the changelog file that have not been deployed'
inputs:
  changeExecListenerClass: # string
    description: 'Fully-qualified class which specifies a ChangeExecListener'
    required: false
  changeExecListenerPropertiesFile: # string
    description: 'Path to a properties file for the ChangeExecListenerClass'
    required: false
  changelogFile: # string
    description: '*required* The root changelog'
    required: true
  contextFilter: # string
    description: 'Changeset contexts to match'
    required: false
  defaultCatalogName: # string
    description: 'The default catalog name to use for the database connection'
    required: false
  defaultSchemaName: # string
    description: 'The default schema name to use for the database connection'
    required: false
  driver: # string
    description: 'The JDBC driver class'
    required: false
  driverPropertiesFile: # string
    description: 'The JDBC driver properties file'
    required: false
  labelFilter: # string
    description: 'Changeset labels to match'
    required: false
  password: # string
    description: 'Password to use to connect to the database'
    required: false
  rollbackOnError: # bool
    description: 'If set to true and any changeset in a deployment fails, then the update operation stops, and liquibase attempts to rollback all changesets just deployed. A changeset marked "fail-on-error=false" does not trigger as an error, therefore rollback-on-error will not occur. Additionally, if a changeset is not auto-rollback compliant or does not have a rollback script, then no rollback-on-error will occur for any changeset.'
    required: false
  showSummary: # string
    description: 'Type of update results summary to show.  Values can be "off", "summary", or "verbose".'
    required: false
  url: # string
    description: '*required* The JDBC database connection URL'
    required: true
  username: # string
    description: 'Username to use to connect to the database'
    required: false
  alwaysDropInsteadOfReplace: # bool
    description: 'If true, drop and recreate a view instead of replacing it.'
    required: false
  alwaysOverrideStoredLogicSchema: # bool
    description: 'When generating SQL for createProcedure, should the procedure schema be forced to the default schema if no schemaName attribute is set?'
    required: false
  autoReorg: # bool
    description: 'Should Liquibase automatically include REORG TABLE commands when needed?'
    required: false
  changelogLockPollRate: # string
    description: 'Number of seconds wait between checks to the changelog lock when it is locked'
    required: false
  changelogLockWaitTimeInMinutes: # string
    description: 'Number of minutes to wait for the changelog lock to be available before giving up'
    required: false
  changelogParseMode: # string
    description: 'Configures how to handle unknown fields in changelog files. Possible values: STRICT which causes parsing to fail, and LAX which continues with the parsing.'
    required: false
  classpath: # string
    description: 'Additional classpath entries to use'
    required: false
  convertDataTypes: # bool
    description: 'Should Liquibase convert to/from STANDARD data types. Applies to both snapshot and update commands.'
    required: false
  customLogDataFile: # string
    description: '[PRO]Relative or fully qualified path to a yaml file containing key:value data to inject or exclude data from JSON structured logs. Learn more at https://docs.liquibase.com/structured-logging'
    required: false
  databaseChangelogLockTableName: # string
    description: 'Name of table to use for tracking concurrent Liquibase usage'
    required: false
  databaseChangelogTableName: # string
    description: 'Name of table to use for tracking change history'
    required: false
  databaseClass: # string
    description: 'Class to use for Database implementation'
    required: false
  ddlLockTimeout: # int32
    description: 'The DDL_LOCK_TIMEOUT parameter indicates the number of seconds a DDL command should wait for the locks to become available before throwing the resource busy error message. This applies only to Oracle databases.'
    required: false
  defaultsFile: # string
    description: 'File with default Liquibase properties'
    required: false
  diffColumnOrder: # bool
    description: 'Should Liquibase compare column order in diff operation?'
    required: false
  driftChangedSeverity: # int32
    description: 'Changed object drift severity'
    required: false
  driftEnabled: # bool
    description: 'Enable or disable drift detection'
    required: false
  driftMissingSeverity: # int32
    description: 'Missing object drift severity'
    required: false
  driftReportEnabled: # bool
    description: 'Enable or disable drift reporting.'
    required: false
  driftReportFormat: # string
    description: 'The format of the Drift Report. Currently, can only be set to "html".'
    required: false
  driftReportMode: # string
    description: 'The report mode of the Drift Report. The report mode defines the differences to include in the Drift Report. Valid modes include: ALL, MISSING, UNEXPECTED, CHANGED'
    required: false
  driftReportName: # string
    description: 'The name of the Drift Report.'
    required: false
  driftReportPath: # string
    description: 'The path to the directory to generate Drift Reports.'
    required: false
  driftUnexpectedSeverity: # int32
    description: 'Unexpected object drift severity'
    required: false
  duplicateFileMode: # string
    description: 'How to handle multiple files being found in the search path that have duplicate paths. Options are WARN (log warning and choose one at random) or ERROR (fail current operation)'
    required: false
  errorOnCircularIncludeAll: # bool
    description: 'Throw an error if Liquibase detects that an includeAll will cause a circular reference (and thus a changelog parse error).'
    required: false
  fileEncoding: # string
    description: 'Encoding to use when reading files. Valid values include: UTF-8, UTF-16, UTF-16BE, UTF-16LE, US-ASCII, or OS to use the system configured encoding.'
    required: false
  filterLogMessages: # bool
    description: 'DEPRECATED: No longer used'
    required: false
  flowVerboseToString: # bool
    description: 'If true, display a more verbose output for the FlowFile toString representation'
    required: false
  generateChangesetCreatedValues: # bool
    description: 'Should Liquibase include a "created" attribute in diff/generateChangelog changesets with the current datetime'
    required: false
  generatedChangesetIdsContainsDescription: # bool
    description: 'Should Liquibase include the change description in the id when generating changesets?'
    required: false
  headless: # bool
    description: 'Force liquibase to think it has no access to a keyboard'
    required: false
  includeCatalogInSpecification: # bool
    description: 'Should Liquibase include the catalog name when determining equality?'
    required: false
  includeSystemClasspath: # bool
    description: 'Include the system classpath when resolving classes at runtime'
    required: false
  licenseKey: # string
    description: 'Liquibase Pro or Liquibase Labs license key used to unlock paid capabilities. Get a free trial at https://liquibase.com/trial and use in CLI or add liquibase.licenseKey=<yourKey> into your defaults file.'
    required: false
  liquibaseCatalogName: # string
    description: 'Catalog to use for Liquibase objects'
    required: false
  liquibaseSchemaName: # string
    description: 'Schema to use for Liquibase objects'
    required: false
  liquibaseTablespaceName: # string
    description: 'Tablespace to use for Liquibase objects'
    required: false
  logChannels: # string
    description: 'Controls which log channels have their level set by the liquibase.logLevel setting. Comma separate multiple values. To set the level of all channels, use "all". Example: liquibase,org.mariadb.jdbc'
    required: false
  logFile: # string
    description: ''
    required: false
  logFormat: # string
    description: 'Sets the format of log output to console or log files. Open Source users default to unstructured "TEXT" logs to the console or output log files. Pro users have the option to set value as "JSON" or "JSON_PRETTY" to enable json-structured log files to the console or output log files.'
    required: false
  logLevel: # string
    description: 'Controls which logs get set to stderr AND to any log file. The CLI defaults, if log file set, to SEVERE. Others vary by integration. The official log levels are: OFF, SEVERE, WARNING, INFO, FINE'
    required: false
  mirrorConsoleMessagesToLog: # bool
    description: 'When set to true, the console messages are mirrored to the logs as [liquibase.ui] to provide a more complete picture of liquibase operations to log analysis tools. Set to false to change this behavior.'
    required: false
  missingPropertyMode: # string
    description: 'How to handle changelog property expressions where a value is not set. For example, a string "${address}" when no "address" property was defined. Values can be: "preserve" which leaves the string as-is, "empty" which replaces it with an empty string, or "error" which stops processing with an error.'
    required: false
  monitorPerformance: # string
    description: 'Enable performance tracking. Set to "false" to disable. If set to "true", data is stored to a `liquibase-TIMESTAMP.jfr` file in your working directory. Any other value will enable tracking and be used as the name of the file to write the data to.'
    required: false
  nativeExecutor: # string
    description: 'Custom executor that can specified'
    required: false
  onMissingIncludeChangelog: # string
    description: 'If set to WARN, then liquibase will not throw exception on missing changelog file, instead will show a warning message.'
    required: false
  onMissingSqlFile: # string
    description: 'If set to WARN, then Liquibase will not throw exception on missing sqlFile inside a sqlFile change type, instead will show a warning message'
    required: false
  outputFile: # string
    description: ''
    required: false
  outputFileEncoding: # string
    description: 'Encoding to use when writing files'
    required: false
  outputLineSeparator: # string
    description: 'Line separator for output'
    required: false
  preserveSchemaCase: # bool
    description: 'Should liquibase treat schema and catalog names as case sensitive?'
    required: false
  proLicenseKey: # string
    description: 'DEPRECATED: Liquibase Pro license key used to unlock paid capabilities. Get a free trial at https://www.liquibase.com/protrial and use in CLI or add liquibase.pro.licenseKey=<yourKey> into your defaults file.'
    required: false
  proMarkUnusedNotDrop: # bool
    description: 'If a column would be dropped in a diffChangeLog, call markUnused instead if set to true'
    required: false
  proSqlInline: # bool
    description: 'If true, generate changeSets with SQL-based changes inlined instead of saving them to an external file'
    required: false
  proSynonymsDropPublic: # bool
    description: 'If false, do not drop public synonyms in diffChangeLog/dropAll'
    required: false
  promptForNonLocalDatabase: # bool
    description: 'Should Liquibase prompt if a non-local database is being accessed'
    required: false
  propertyProviderClass: # string
    description: 'Implementation of Properties class to provide additional driver properties'
    required: false
  searchPath: # string
    description: 'Complete list of Location(s) to search for files such as changelog files in. Multiple paths can be specified by separating them with commas.'
    required: false
  secureParsing: # bool
    description: 'If true, remove functionality from file parsers which could be used insecurely. Examples include (but not limited to) disabling remote XML entity support.'
    required: false
  shouldRun: # bool
    description: 'Should Liquibase commands execute'
    required: false
  shouldSnapshotData: # bool
    description: 'Should Liquibase snapshot data by default?'
    required: false
  showBanner: # bool
    description: 'If true, show a Liquibase banner on startup.'
    required: false
  sqlLogLevel: # string
    description: 'Level to log SQL statements to'
    required: false
  sqlShowSqlWarnings: # bool
    description: 'Show SQLWarning messages'
    required: false
  strict: # bool
    description: 'Be stricter on allowed Liquibase configuration and setup?'
    required: false
  supportPropertyEscaping: # bool
    description: 'Support escaping changelog parameters using a colon. Example: ${:user.name}'
    required: false
  useProcedureSchema: # bool
    description: 'If set to true (default value), createProcedure tags with a set schemaName will modify the procedure body with the given schema name.'
    required: false
  validateXmlChangelogFiles: # bool
    description: 'Will perform xsd validation of XML changelog files. When many XML changelog files are included this validation may impact Liquibase performance. Defaults to true.'
    required: false
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.changeExecListenerClass }}
    - ${{ inputs.changeExecListenerPropertiesFile }}
    - ${{ inputs.changelogFile }}
    - ${{ inputs.contextFilter }}
    - ${{ inputs.defaultCatalogName }}
    - ${{ inputs.defaultSchemaName }}
    - ${{ inputs.driver }}
    - ${{ inputs.driverPropertiesFile }}
    - ${{ inputs.labelFilter }}
    - ${{ inputs.password }}
    - ${{ inputs.rollbackOnError }}
    - ${{ inputs.showSummary }}
    - ${{ inputs.url }}
    - ${{ inputs.username }}
    - ${{ inputs.alwaysDropInsteadOfReplace }}
    - ${{ inputs.alwaysOverrideStoredLogicSchema }}
    - ${{ inputs.autoReorg }}
    - ${{ inputs.changelogLockPollRate }}
    - ${{ inputs.changelogLockWaitTimeInMinutes }}
    - ${{ inputs.changelogParseMode }}
    - ${{ inputs.classpath }}
    - ${{ inputs.convertDataTypes }}
    - ${{ inputs.customLogDataFile }}
    - ${{ inputs.databaseChangelogLockTableName }}
    - ${{ inputs.databaseChangelogTableName }}
    - ${{ inputs.databaseClass }}
    - ${{ inputs.ddlLockTimeout }}
    - ${{ inputs.defaultsFile }}
    - ${{ inputs.diffColumnOrder }}
    - ${{ inputs.driftChangedSeverity }}
    - ${{ inputs.driftEnabled }}
    - ${{ inputs.driftMissingSeverity }}
    - ${{ inputs.driftReportEnabled }}
    - ${{ inputs.driftReportFormat }}
    - ${{ inputs.driftReportMode }}
    - ${{ inputs.driftReportName }}
    - ${{ inputs.driftReportPath }}
    - ${{ inputs.driftUnexpectedSeverity }}
    - ${{ inputs.duplicateFileMode }}
    - ${{ inputs.errorOnCircularIncludeAll }}
    - ${{ inputs.fileEncoding }}
    - ${{ inputs.filterLogMessages }}
    - ${{ inputs.flowVerboseToString }}
    - ${{ inputs.generateChangesetCreatedValues }}
    - ${{ inputs.generatedChangesetIdsContainsDescription }}
    - ${{ inputs.headless }}
    - ${{ inputs.includeCatalogInSpecification }}
    - ${{ inputs.includeSystemClasspath }}
    - ${{ inputs.licenseKey }}
    - ${{ inputs.liquibaseCatalogName }}
    - ${{ inputs.liquibaseSchemaName }}
    - ${{ inputs.liquibaseTablespaceName }}
    - ${{ inputs.logChannels }}
    - ${{ inputs.logFile }}
    - ${{ inputs.logFormat }}
    - ${{ inputs.logLevel }}
    - ${{ inputs.mirrorConsoleMessagesToLog }}
    - ${{ inputs.missingPropertyMode }}
    - ${{ inputs.monitorPerformance }}
    - ${{ inputs.nativeExecutor }}
    - ${{ inputs.onMissingIncludeChangelog }}
    - ${{ inputs.onMissingSqlFile }}
    - ${{ inputs.outputFile }}
    - ${{ inputs.outputFileEncoding }}
    - ${{ inputs.outputLineSeparator }}
    - ${{ inputs.preserveSchemaCase }}
    - ${{ inputs.proLicenseKey }}
    - ${{ inputs.proMarkUnusedNotDrop }}
    - ${{ inputs.proSqlInline }}
    - ${{ inputs.proSynonymsDropPublic }}
    - ${{ inputs.promptForNonLocalDatabase }}
    - ${{ inputs.propertyProviderClass }}
    - ${{ inputs.searchPath }}
    - ${{ inputs.secureParsing }}
    - ${{ inputs.shouldRun }}
    - ${{ inputs.shouldSnapshotData }}
    - ${{ inputs.showBanner }}
    - ${{ inputs.sqlLogLevel }}
    - ${{ inputs.sqlShowSqlWarnings }}
    - ${{ inputs.strict }}
    - ${{ inputs.supportPropertyEscaping }}
    - ${{ inputs.useProcedureSchema }}
    - ${{ inputs.validateXmlChangelogFiles }}
branding:
  icon: database
  color: red
